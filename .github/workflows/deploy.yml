name: ðŸš€ Deploy to FTP

on:
  push:
    branches:
      - main   # only trigger on pushes to main
  workflow_dispatch:   # ðŸ‘ˆ allows manual runs
jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - name: ðŸ“¥ Checkout code
        uses: actions/checkout@v4

      - name: Install LFTP
        run: sudo apt-get install -y lftp

      - name: ðŸ“‚ Deploy via FTP
        run: |
          lftp -e "
            open -u "zbarek@pusher=.divader.si,${{ secrets.FTP_PASSWORD }}" ftp://ftp.divader.si;<<EOF
            set ftp:ssl-force true;
            set ftp:ssl-protect-data true;
            set ssl:verify-certificate false;
            mirror -R --verbose ./ /home/divader/pusher.divader.si/;
           bye
          EOF
          "


